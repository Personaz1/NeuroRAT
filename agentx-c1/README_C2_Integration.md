# Интеграция C1Brain с C2 Controller

## Обзор

Данная интеграция позволяет агентам, управляемым LLM через C1Brain, взаимодействовать с ботнетом и зондами через C2 Controller. LLM-агент получает доступ к инструментам управления ботнетом, что позволяет автоматизировать сканирование, разведку, внедрение и управление зондами.

## Архитектура интеграции

```
+-------------+     +--------------------+     +-------------------+
|    LLM API  | <-> |      C1Brain       | <-> |   IntegrationManager  |
+-------------+     +--------------------+     +-------------------+
                                                          |
                                                          v
                                               +--------------------+
                                               |    C2Controller    |
                                               +--------------------+
                                                          |
                                                          v
                                               +--------------------+
                                               |  Botnet & Agents   |
                                               +--------------------+
```

## Компоненты

### 1. C1Brain

Основной интеллектуальный компонент, взаимодействующий с LLM (Language Learning Model). Отвечает за:
- Обработку запросов пользователя
- Взаимодействие с LLM через API
- Управление инструментами и модулями
- Предоставление инструментов для работы с C2 Controller

### 2. C2Controller

Контроллер для управления ботнетом и зондами. Отвечает за:
- Управление агентами (зондами)
- Распространение на новые цели
- Выполнение команд на зараженных системах
- Сбор статистики и информации о зараженных системах

### 3. IntegrationManager

Компонент, обеспечивающий интеграцию между C1Brain и C2Controller. Отвечает за:
- Регистрацию инструментов C2 в C1Brain
- Адаптацию методов C2API для использования в качестве инструментов LLM
- Проверку и валидацию параметров при вызове методов

## Функциональность

### Инструменты для работы с ботнетом

| Инструмент | Описание |
|------------|----------|
| `c2_get_agents` | Получение списка всех агентов |
| `c2_propagate` | Распространение на указанные цели |
| `c2_add_command` | Добавление команды для агента |
| `c2_get_stats` | Получение статистики ботнета |
| `c2_search_agents` | Поиск агентов по критериям |
| `c2_get_infections` | Получение информации о заражениях |
| `c2_kill_agent` | Отправка команды на самоуничтожение агента |
| `c2_upgrade_agent` | Обновление агента на новую версию |

### Типы команд для агентов

| Команда | Описание |
|---------|----------|
| `shell` | Выполнение shell-команды |
| `download` | Загрузка файла на зараженную систему |
| `upload` | Выгрузка файла с зараженной системы |
| `screenshot` | Создание снимка экрана |
| `keylog` | Запуск/остановка кейлоггера |
| `kill` | Самоуничтожение агента |
| `upgrade` | Обновление агента |

## Использование

### Инициализация интеграции

```python
from core.c1_brain import C1Brain
from core.c2_controller import C2Controller
from init_c2_integration import init_integration

# Создаем компоненты
c1_brain = C1Brain()
c2_controller = C2Controller()

# Инициализируем интеграцию
integration = init_integration(c1_brain, c2_controller)

# Теперь c1_brain имеет доступ к инструментам C2
```

### Примеры запросов для LLM-агента

1. Получение списка агентов:
```
Покажи мне список всех активных агентов в ботнете
```

2. Запуск распространения:
```
Запусти распространение на подсеть 192.168.1.0/24 с использованием техники эксплуатации уязвимостей
```

3. Выполнение команды на агенте:
```
Выполни команду 'whoami' на агенте с ID abc-123
```

4. Поиск агентов:
```
Найди все агенты под управлением Windows с возможностью кейлоггинга
```

5. Получение статистики:
```
Покажи общую статистику ботнета
```

## Безопасность

1. Все инструменты проверяют наличие обязательных параметров перед выполнением.
2. Ошибки при выполнении инструментов обрабатываются и логируются.
3. Доступ к функциональности C2 предоставляется только через специальные инструменты.

## Ограничения

1. Текущая версия предоставляет симуляцию ботнета для демонстрации и тестирования.
2. Для реального использования необходимо настроить соответствующие компоненты C2.
3. В целях безопасности рекомендуется использовать только в изолированной среде.

## Тестирование

Для тестирования интеграции можно использовать скрипт `test_c1_c2_integration.py`:

```bash
python test_c1_c2_integration.py
```

## Дальнейшее развитие

1. Добавление новых типов команд для агентов
2. Улучшение алгоритмов распространения
3. Интеграция с другими инструментами разведки и эксплуатации
4. Добавление механизмов обмена информацией между агентами
5. Разработка специализированных промптов для более эффективного управления ботнетом через LLM 